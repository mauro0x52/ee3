{"ts":1344259515313,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function ajax(params)\n{\n    var app = params.app,\n        success,\n        error,\n        url,\n        call,\n        parseQuery;\n\n    parseQuery = function (obj, label) {\n        \"use strict\";\n\n        var query_string = \"\";\n        \n        for (var key in obj) {\n            if (typeof obj[key] !== 'object') {\n                query_string += (label ? label+\".\" : \"\") + escape(key) + '=' + escape(obj[key]) + '&';\n            } else {\n                query_string += parseQuery(obj[key], (label ? label + \".\" : \"\") + key) + '&';\n            }\n        }\n        return query_string.slice(0, query_string.length - 1);\n    };\n\n    call = function (params) {\n        var invocation;\n\n        success = params.success;\n        error = params.error;\n        url = params.url + \"?\" + parseQuery(params.data);\n\n        try {\n            if (window.XDomainRequest) {\n                invocation = new window.XDomainRequest();\n                if (invocation) {\n                    invocation.onload = function () {\n                        if(app.success){\n                            app.success(invocation.responseText);\n                        } else {\n                            success.apply(app, [invocation.responseText]);\n                        }\n                    };\n                    invocation.open(params.method, url, true);\n                    invocation.send();\n                } else {\n                    console.error(\"Objeto de requisição não pode ser criado\");\n                }\n            } else {\n                invocation = new XMLHttpRequest();\n                if (invocation) {\n                    invocation.onreadystatechange = function () {\n                        if (invocation.readyState == 4) {\n                            if (invocation.status == 200) {\n                                if(app.success) {\n                                    app.success(invocation.responseText);\n                                } else {\n                                    success.apply(app, [invocation.responseText]);\n                                }\n                            } else {\n                                console.error(\"Algo deu errado.\");\n                            }\n                        }\n                    };\n                    invocation.open('GET', url, true);\n                    invocation.send();\n                } else {\n                    console.error(\"Objeto de requisição não pode ser criado\");\n                }\n            }\n        } catch(e) {\n            console.error(e);\n        }\n    };\n\n    this.get = function (params) {\n        call({\n            success : params.success,\n            url     : params.url,\n            data    : params.data,\n            method  : 'GET'\n        });\n    };\n\n    this.post = function (params) {\n        call({\n            success : params.success,\n            url     : params.url,\n            data    : params.data,\n            method  : 'POST'\n        });\n    };\n\n    this.put = function (params) {\n        call({\n            success : params.success,\n            url     : params.url,\n            data    : params.data,\n            method  : 'PUT'\n        });\n    };\n\n    this.del = function (params) {\n        call({\n            success : params.success,\n            url     : params.url,\n            data    : params.data,\n            method  : 'DELETE'\n        });\n    };\n};"]],"start1":0,"start2":0,"length1":0,"length2":3374}]],"length":3374}
